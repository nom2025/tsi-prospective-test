# 作業記録: 火山データ取得機能の検討と削除

## 実施日
2025年1月（推定）

## 実施内容

### 1. 火山噴火データ取得機能の実装検討

#### 1.1 初期実装
- **目的**: 日本・世界の火山噴火データを15年分取得する機能の実装
- **データソース**:
  - 日本の火山データ: 気象庁（https://www.data.jma.go.jp/vois/data/filing/volcano.html）
  - 世界の火山データ: Smithsonian Global Volcanism Program (GVP)（https://volcano.si.edu/search_eruption.cfm）

#### 1.2 作成したスクリプト
- **`データ自動取得/src/fetch_japan_volcano_data.py`**（後に削除）
  - 気象庁から日本国内の火山噴火データを取得
  - 手動ダウンロードファイルからの読み込み機能を実装
  - ウェブスクレイピング機能も実装（サイト構造に応じて調整が必要）
  
- **`データ自動取得/src/fetch_world_volcano_data.py`**（後に削除）
  - GVPから世界の火山噴火データを取得
  - 手動ダウンロードファイルからの読み込み機能を実装
  - Kaggle APIからの取得機能も実装（オプション）

#### 1.3 データ取得実行.batへの追加
- 火山データ取得ステップを追加
- ステップ番号を[1/6]〜[6/6]に変更

#### 1.4 CSV確認スクリプトの作成
- **`データ自動取得/src/check_gvp_csv.py`**（後に削除）
  - GVPのCSVファイル構造を確認するスクリプト
  - カラム名の自動検出機能
  - データサンプルと統計情報の表示
  
- **`データ自動取得/src/CSV確認.bat`**（後に削除）
  - CSV確認スクリプトを実行するバッチファイル

### 2. 日本の火山データ取得機能の削除

#### 2.1 削除理由
- 気象庁のウェブサイト構造が複雑で、自動取得の難易度が高い
- 手動ダウンロードに依存する必要があるが、自動化の価値が低い

#### 2.2 削除したファイル
- `データ自動取得/src/fetch_japan_volcano_data.py`

#### 2.3 更新したファイル
- `データ自動取得/データ取得実行.bat`: 日本の火山データ取得ステップを削除、[1/5]〜[5/5]に変更
- `データ自動取得/README.md`: 日本の火山データ取得に関する記述を削除

### 3. 世界の火山データ取得機能の削除

#### 3.1 削除理由
- GVPのデータベースは直接APIを提供していない
- 手動でCSVファイルをダウンロードする必要があり、自動化の難易度が高い
- データベースの構造が変更される可能性があり、メンテナンスコストが高い

#### 3.2 削除したファイル
- `データ自動取得/src/fetch_world_volcano_data.py`
- `データ自動取得/src/check_gvp_csv.py`
- `データ自動取得/src/CSV確認.bat`

#### 3.3 更新したファイル
- `データ自動取得/データ取得実行.bat`: 世界火山データ取得ステップを削除、[1/4]〜[4/4]に変更
- `データ自動取得/README.md`: 火山データ取得に関する記述を全て削除

## 最終的な構成

### データ取得スクリプト（4つ）
1. **国内地震データ取得** (`fetch_earthquake_data.py`)
   - Yahoo!天気・災害から取得
   
2. **世界地震データ取得** (`fetch_world_earthquake_data.py`)
   - USGS Earthquake Catalog APIから取得
   
3. **深さデータ取得** (`fetch_depth_data.py`)
   - F-net（防災科研）から取得
   
4. **GNSSデータ取得** (`fetch_gnss_data.py`)
   - 国土地理院GEONETから取得

### データ取得実行.batの実行順序
1. [1/4] 国内地震データを取得中...
2. [2/4] 世界地震データを取得中...
3. [3/4] 深さデータを取得中...
4. [4/4] GNSSデータを取得中...

## 学んだこと

### データ取得の難易度について
- **APIが提供されている場合**: 自動取得が容易（例: USGS Earthquake Catalog API）
- **ウェブスクレイピングが必要な場合**: サイト構造の変更に弱く、メンテナンスコストが高い
- **手動ダウンロードが必要な場合**: 自動化の価値が低く、実装コストに見合わない

### 実装方針の見直し
- 難易度が高い機能は、実装前に十分な検討が必要
- 手動操作が必要な場合は、自動化の価値を慎重に評価する
- データソースの特性を事前に調査し、実装可能性を判断する

## 今後の検討事項

火山データが必要になった場合の代替案：
1. **公開データセットの活用**: KaggleやGitHubで公開されている火山データセットを活用
2. **定期的な手動更新**: 月次や四半期ごとに手動でデータを更新する運用
3. **API提供サービスの調査**: 火山データを提供するAPIサービスの有無を調査

## ファイル変更履歴

### 作成したファイル（後に削除）
- `データ自動取得/src/fetch_japan_volcano_data.py`
- `データ自動取得/src/fetch_world_volcano_data.py`
- `データ自動取得/src/check_gvp_csv.py`
- `データ自動取得/src/CSV確認.bat`

### 更新したファイル
- `データ自動取得/データ取得実行.bat`
- `データ自動取得/README.md`

### 最終状態
- 火山データ取得機能は全て削除され、地震関連データのみの取得に統一
- データ取得スクリプトは4つ（国内地震、世界地震、深さ、GNSS）

